{"version":3,"file":"all-offers.js","sourceRoot":"","sources":["../../../src/assemble/assemble/all-offers.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,KAAK,EAAE,aAAa,EAAY,MAAM,mBAAmB,CAAC;AAEnE,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AACrE,OAAO,iCAAiC,CAAC;AACzC,OAAO,oBAAoB,CAAC;AAC5B,OAAO,kCAAkC,CAAC;AAC1C,OAAO,gBAAgB,CAAC;AACxB,OAAO,EAAC,SAAS,EAAC,MAAM,2BAA2B,CAAC;AAI7C,IAAM,SAAS,GAAf,MAAM,SAAU,SAAQ,UAAU;IAWvC,KAAK,CAAC,YAAY;QAChB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAgB,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,UAAU,CAAE,CAAC;QAE9F,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAC/C,UAAU,EAAE,IAAI;YAChB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,SAAS,EAAE,UAAU;YACrB,OAAO,EAAE,gBAAgB;YACzB,OAAO,EAAE,IAAI;YACb,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;SAChC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,CAAC,OAAO,CAAC,CAAC;IACzC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO,IAAI,CAAA;;aAEJ,CAAC;SACT;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAA,sCAAsC,CAAC;QAE/F,OAAO,IAAI,CAAA;;;UAGL,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,EAAE;;YAAC,OAAA,IAAI,CAAA,yBAAyB,GAAE,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,gBAAgB,EAAE;gBACpJ,OAAO,EAAE,IAAI;gBACb,QAAQ,EAAE,IAAI;gBACd,MAAM,EAAE;oBACN,UAAU;iBACX;aACF,CAAC,CAAC,IAAI,MAAA,IAAI,CAAC,QAAQ,0CAAE,QAAQ,CAAC,GAAG,CAAE,CAAY,CAAC,UAAU,EAAE,KAAK,kBAAkB,CAAA;SAAA,CAAC;;;KAGtF,CAAC;IACJ,CAAC;CACF,CAAA;AA9CC;IADC,KAAK,EAAE;2CAC+B;AAGvC;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;+CACtB;AAG5B;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;0CAClB;AAThB,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAiDrB;SAjDY,SAAS","sourcesContent":["import { LitElement, html } from 'lit';\nimport { state, customElement, property } from 'lit/decorators.js';\nimport { InstalledCell, AgentPubKey, Record, AppWebsocket, InstalledAppInfo, Create } from '@holochain/client';\nimport { contextProvided } from '@lit-labs/context';\nimport { appWebsocketContext, appInfoContext } from '../../contexts';\nimport '@material/mwc-circular-progress';\nimport '@material/mwc-list';\nimport '@material/mwc-list/mwc-list-item';\nimport './offer-detail';\nimport {RecordBag} from '@holochain-open-dev/utils';\nimport { Offer } from './offer';\n\n@customElement('all-offers')\nexport class AllOffers extends LitElement {\n\n  @state()\n  _records: RecordBag<Offer> | undefined;\n\n  @contextProvided({ context: appWebsocketContext })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvided({ context: appInfoContext })\n  appInfo!: InstalledAppInfo;\n\n  async firstUpdated() {\n    const cellData = this.appInfo.cell_data.find((c: InstalledCell) => c.role_id === 'assemble')!;\n\n    const records = await this.appWebsocket.callZome({\n      cap_secret: null,\n      cell_id: cellData.cell_id,\n      zome_name: 'assemble',\n      fn_name: 'get_all_offers',\n      payload: null,\n      provenance: cellData.cell_id[1]\n    });\n    \n    this._records = new RecordBag(records);\n  }\n\n  render() {\n    if (!this._records) {\n      return html`<div style=\"display: flex; flex: 1; align-items: center; justify-content: center\">\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n      </div>`;\n    }\n    \n    if (this._records.entryRecords.length === 0) return html`<span>There are no offers yet</span>`;\n    \n    return html`\n      <div style=\"display: flex; flex-direction: column\">\n        <mwc-list>\n        ${this._records.actionMap.entries().map(([actionHash, a]) => html`<mwc-list-item @click=${()=> this.dispatchEvent(new CustomEvent('offer-selected', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          actionHash\n        }\n      }))}>${this._records?.entryMap.get((a as Create).entry_hash).title}</mwc-list-item>`)}\n      </mwc-list>\n      </div>\n    `;\n  }\n}\n"]}