{"version":3,"file":"holochain-app.js","sourceRoot":"","sources":["../src/holochain-app.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACnE,OAAO,EACL,YAAY,GAGb,MAAM,mBAAmB,CAAC;AAC3B,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,iCAAiC,CAAC;AACzC,OAAO,sBAAsB,CAAC;AAC9B,OAAO,sBAAsB,CAAC;AAE9B,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,YAAY,CAAC;AAEjE,OAAO,gCAAgC,CAAC;AACxC,OAAO,kCAAkC,CAAC;AAC1C,OAAO,kCAAkC,CAAC;AAC1C,OAAO,iCAAiC,CAAC;AAGlC,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,UAAU;IAArC;;QAEI,YAAO,GAAG,IAAI,CAAC;IAyH1B,CAAC;IA7GC,KAAK,CAAC,YAAY;QAChB,IAAI,CAAC,YAAY,GAAG,MAAM,YAAY,CAAC,OAAO,CAC5C,kBAAkB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CACxC,CAAC;QAEF,IAAI,CAAC,OAAO,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;YAC7C,gBAAgB,EAAE,UAAU;SAC7B,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,OAAO;YACd,OAAO,IAAI,CAAA;;OAEV,CAAC;QAEJ,OAAO,IAAI,CAAA;;qCAEsB,KAAK,EAAE,CAAc,EAAE,EAAE;YACtD,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC;YAE9C,UAAU,CAAC,KAAK,IAAG,EAAE;;gBAEb,MAAM,CAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,YAAY,CAAS,CAAA,CAAC,YAAY,EAAE,CAAC;gBACpF,CAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,qBAAqB,CAAS,CAAA,CAAC,KAAK,EAAE,CAAC;gBACxE,MAAM,CAAA,MAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,cAAc,CAAS,0CAAE,YAAY,EAAE,CAAA,CAAC;YAC/E,CAAC,CAAC,CAAA;QACJ,CAAC;;;;;;;yEAOkE,KAAK,EAAE,CAAc,EAAC,EAAE;YACzF,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC;YAE9C,UAAU,CAAC,KAAK,IAAG,EAAE;;gBAGrB,MAAM,CAAA,MAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,cAAc,CAAS,0CAAE,YAAY,EAAE,CAAA,CAAC;YAClF,CAAC,CAAC,CAAA;QAAC,CAAC;gDACuC,GAAG,EAAE,WAAC,OAAA,CAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,qBAAqB,CAAS,CAAA,CAAC,IAAI,EAAE,CAAA,EAAA;;;QAGpH,IAAI,CAAC,kBAAkB,CAAC,CAAC;YACzB,IAAI,CAAA,+CAA+C,IAAI,CAAC,kBAAkB,qBAAqB,KAAK,IAAG,EAAE;gBACvG,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC;gBAGpC,UAAU,CAAC,KAAK,IAAI,EAAE;;oBACtB,MAAM,CAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,YAAY,CAAS,CAAA,CAAC,YAAY,EAAE,CAAC;oBAC5E,MAAM,CAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,aAAa,CAAS,CAAA,CAAC,YAAY,EAAE,CAAC;oBAE7E,MAAM,CAAA,MAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,cAAc,CAAS,0CAAE,YAAY,EAAE,CAAA,CAAC;gBAC/E,CAAC,CAAC,CAAA;YACJ,CAAC,kBAAkB,CAAC,CAAC;YACrB,IAAI,CAAA,gDAAgD;;;;;;6EAMiB,KAAK,EAAE,CAAc,EAAC,EAAE;YAC7F,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,MAAM,CAAC,iBAAiB,CAAC;YACrD,UAAU,CAAC,KAAK,IAAI,EAAE;;gBACrB,MAAM,CAAA,MAAC,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CAAC,gBAAgB,CAAS,0CAAE,YAAY,EAAE,CAAA,CAAC;YACvF,CAAC,CAAC,CAAA;QAAC,CAAC;;;QAGD,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC3B,IAAI,CAAA,mDAAmD,IAAI,CAAC,oBAAoB,oBAAoB,CAAC,CAAC;YACtG,IAAI,CAAA,iDAAiD;;;;UAInD,CAAC;IACT,CAAC;;AAEM,mBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BlB,CAAC;AAxHO;IAAR,KAAK,EAAE;6CAAgB;AACf;IAAR,KAAK,EAAE;wDAA4C;AAC3C;IAAR,KAAK,EAAE;0DAA8C;AAItD;IAFC,eAAe,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;IACjD,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;kDACC;AAI5B;IAFC,eAAe,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;IAC5C,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6CACA;AAZhB,YAAY;IADxB,aAAa,CAAC,eAAe,CAAC;GAClB,YAAY,CA2HxB;SA3HY,YAAY","sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport {\n  AppWebsocket,\n  ActionHash,\n  InstalledAppInfo,\n} from '@holochain/client';\nimport { contextProvider } from '@lit-labs/context';\nimport '@material/mwc-circular-progress';\nimport '@material/mwc-drawer';\nimport '@material/mwc-dialog';\n\nimport { appWebsocketContext, appInfoContext } from './contexts';\n\nimport './assemble/assemble/all-offers';\nimport './assemble/assemble/create-offer';\nimport './assemble/assemble/offer-detail';\nimport './assemble/assemble/my-promises';\n\n@customElement('holochain-app')\nexport class HolochainApp extends LitElement {\n\n  @state() loading = true;\n  @state() _selectedOfferHash: ActionHash | undefined;\n  @state() _selectedPromiseHash: ActionHash | undefined;\n\n  @contextProvider({ context: appWebsocketContext })\n  @property({ type: Object })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvider({ context: appInfoContext })\n  @property({ type: Object })\n  appInfo!: InstalledAppInfo;\n\n  async firstUpdated() {\n    this.appWebsocket = await AppWebsocket.connect(\n      `ws://localhost:${process.env.HC_PORT}`\n    );\n\n    this.appInfo = await this.appWebsocket.appInfo({\n      installed_app_id: 'assemble',\n    });\n\n    this.loading = false;\n  }\n\n  render() {\n    if (this.loading)\n      return html`\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n      `;\n\n    return html`\n      <mwc-dialog id=\"create-offer-dialog\">\n      <create-offer @offer-created=${async (e: CustomEvent) => {\n        this._selectedOfferHash = e.detail.actionHash;\n\n        setTimeout(async ()=> {\n          \n                await (this.shadowRoot?.getElementById('all-offers') as any).firstUpdated();\n        (this.shadowRoot?.getElementById('create-offer-dialog') as any).close();\n        await (this.shadowRoot?.getElementById('offer-detail') as any)?.firstUpdated();\n        })\n      }}></create-offer>\n      </mwc-dialog>\n      \n      <main>\n      <div style=\"flex: 1; display: flex; flex-direction: row\">\n    <mwc-drawer style=\"flex: 1\">\n    <div style=\"height: 100%; display: flex; flex-direction: column\">\n          <all-offers id=\"all-offers\" style=\"flex: 1;\" @offer-selected=${async (e: CustomEvent)=>{\n        this._selectedOfferHash = e.detail.actionHash;\n        \n        setTimeout(async ()=> {\n          \n        \n        await (this.shadowRoot?.getElementById('offer-detail') as any)?.firstUpdated();\n     }) }}></all-offers>\n      <mwc-button label=\"Create offer\" @click=${() => (this.shadowRoot?.getElementById('create-offer-dialog') as any).show()}></mwc-button>\n    </div>\n    <div slot=\"appContent\">\n      ${this._selectedOfferHash ? \n        html`<offer-detail id=\"offer-detail\" .actionHash=${this._selectedOfferHash} @offer-completed=${async ()=> {\n          this._selectedOfferHash = undefined;\n          \n                    \n          setTimeout(async () => {\n          await (this.shadowRoot?.getElementById('all-offers') as any).firstUpdated();\n          await (this.shadowRoot?.getElementById('my-promises') as any).firstUpdated();\n\n          await (this.shadowRoot?.getElementById('offer-detail') as any)?.firstUpdated();\n          })\n        }}></offer-detail>` : \n        html`<span>Select an offer to see its detail</span>`}\n          </div>\n</mwc-drawer>\n\n          <mwc-drawer style=\"flex: 1\">\n    <div style=\"height: 100%; display: flex; flex-direction: column\">\n          <my-promises id=\"my-promises\" style=\"flex: 1;\" @promise-selected=${async (e: CustomEvent)=>{\n        this._selectedPromiseHash = e.detail.promiseActionHash;\n          setTimeout(async () => {\n           await (this.shadowRoot?.getElementById('promise-detail') as any)?.firstUpdated();\n     }) }}></my-promises>\n    </div>\n    <div slot=\"appContent\">\n      ${this._selectedPromiseHash ? \n        html`<promise-detail id=\"promise-detail\" .actionHash=${this._selectedPromiseHash}></promise-detail>` : \n        html`<span>Select a promise to see its detail</span>`}\n          </div>\n</mwc-drawer>\n      </div>\n  </main>`;\n  }\n\n  static styles = css`\n    :host {\n      min-height: 100vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-start;\n      font-size: calc(10px + 2vmin);\n      color: #1a2b42;\n      width: 100%;\n      margin: 0;\n      text-align: center;\n      background-color: var(--lit-element-background-color);\n    }\n\n    main {\n      display: flex;\n      flex-grow: 1;\n    }\n\n    .app-footer {\n      font-size: calc(12px + 0.5vmin);\n      align-items: center;\n    }\n\n    .app-footer a {\n      margin-left: 5px;\n    }\n  `;\n}\n"]}